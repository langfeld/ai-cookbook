# ============================================
# AI Cookbook — Docker Compose
# ============================================
# Ein Container, ein Port, ein Volume.
#
# Starten:  docker compose up -d
# Stoppen:  docker compose down
# Logs:     docker compose logs -f
# Update:   docker compose pull && docker compose up -d

services:
  cookbook:
    image: ghcr.io/GITHUB_USER/ai-cookbook:latest   # ← GitHub-User anpassen!
    container_name: ai-cookbook
    restart: unless-stopped
    ports:
      - "8080:3001"
    volumes:
      - cookbook-data:/app/data       # Datenbank + Uploads (persistent)
    environment:
      # --- Pflicht ---
      - JWT_SECRET=CHANGE_ME         # openssl rand -base64 48

      # --- NAS-Berechtigungen (Synology: 1000, QNAP: 1000) ---
      - PUID=1000
      - PGID=1000

      # --- Optional (Fallback, wenn im Admin-Panel nicht konfiguriert) ---
      # - KIMI_API_KEY=              # Besser: Im Admin-Panel unter Einstellungen setzen
      # - AI_PROVIDER=kimi           # kimi, openai, anthropic, ollama
      # - MAX_UPLOAD_SIZE=10         # MB pro Bild

volumes:
  cookbook-data:
