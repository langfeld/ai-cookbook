---
const composeYaml = `services:
  zauberjournal:
    image: ghcr.io/langfeld/zauberjournal:latest
    container_name: zauberjournal
    restart: unless-stopped
    ports:
      - "8080:3001"
    volumes:
      - ./data:/app/data
    environment:
      - JWT_SECRET=CHANGE_ME    # openssl rand -base64 48
      - PUID=1000
      - PGID=1000`

const steps = [
  {
    number: '01',
    title: 'docker-compose.yml erstellen',
    description: 'Kopiere die Konfiguration in eine Datei und passe JWT_SECRET an.',
    icon: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/></svg>`,
  },
  {
    number: '02',
    title: 'Container starten',
    description: 'docker compose up -d â€” fertig.',
    icon: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="5 3 19 12 5 21 5 3"/></svg>`,
  },
  {
    number: '03',
    title: 'Browser Ã¶ffnen',
    description: 'http://localhost:8080 â€” Admin-Account anlegen und loslegen.',
    icon: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"/><path d="M2 12h20"/></svg>`,
  },
]
---

<section id="quickstart" class="relative py-24 sm:py-32">
  <div class="absolute inset-0 bg-gradient-to-b from-transparent via-stone-100/50 dark:via-stone-900/30 to-transparent"></div>

  <div class="relative mx-auto px-4 sm:px-6 lg:px-8 max-w-7xl">
    <!-- Section Header -->
    <div class="mx-auto mb-16 max-w-3xl text-center reveal">
      <div class="inline-flex items-center gap-2 mb-4 px-3 py-1.5 rounded-full font-medium text-sm bg-accent-100/60 text-accent-600 dark:bg-accent-900/20 dark:text-accent-400">
        <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>
        Quick Start
      </div>
      <h2 class="font-display font-bold text-stone-900 dark:text-stone-50 text-3xl sm:text-4xl lg:text-5xl">
        In 2 Minuten loslegen
      </h2>
      <p class="mt-4 text-stone-600 dark:text-stone-400 text-lg">
        Ein Container, drei Schritte â€” mehr braucht es nicht.
      </p>
    </div>

    <div class="items-start gap-8 lg:gap-12 grid lg:grid-cols-5">
      <!-- Steps (left side) -->
      <div class="space-y-6 lg:col-span-2 reveal-stagger">
        {steps.map((step) => (
          <div class="flex items-start gap-4 reveal">
            <div class="flex justify-center items-center rounded-xl w-12 h-12 bg-accent-100 text-accent-600 dark:bg-accent-900/30 dark:text-accent-400 shrink-0">
              <div class="w-5 h-5" set:html={step.icon} />
            </div>
            <div>
              <div class="flex items-baseline gap-2 mb-1">
                <span class="font-bold text-xs tracking-wider text-accent-500 dark:text-accent-400">{step.number}</span>
                <h3 class="font-semibold text-stone-900 dark:text-stone-50">{step.title}</h3>
              </div>
              <p class="text-stone-600 dark:text-stone-400 text-sm leading-relaxed">{step.description}</p>
            </div>
          </div>
        ))}

        <!-- Extra info -->
        <div class="bg-primary-50 dark:bg-primary-950/30 mt-8 p-4 border border-primary-200/60 dark:border-primary-800/40 rounded-xl reveal">
          <div class="flex gap-3">
            <span class="text-lg shrink-0">ðŸ’¡</span>
            <div class="text-primary-800 dark:text-primary-300 text-sm">
              <strong>Tipp:</strong> KI-Provider (Kimi, OpenAI, etc.) lassen sich bequem im Admin-Panel konfigurieren â€” kein Neustart nÃ¶tig.
            </div>
          </div>
        </div>
      </div>

      <!-- Code Block (right side) -->
      <div class="lg:col-span-3 reveal">
        <div class="group code-block relative">
          <!-- Terminal header -->
          <div class="flex items-center gap-2 bg-stone-800 px-4 py-3 border-stone-700/50 border-b">
            <div class="flex gap-1.5">
              <div class="bg-red-500/80 rounded-full w-3 h-3"></div>
              <div class="bg-yellow-500/80 rounded-full w-3 h-3"></div>
              <div class="bg-green-500/80 rounded-full w-3 h-3"></div>
            </div>
            <span class="ml-2 font-mono text-stone-400 text-xs">docker-compose.yml</span>

            <!-- Copy button -->
            <button
              id="copy-btn"
              class="hover:bg-stone-700/50 opacity-0 group-hover:opacity-100 ml-auto px-3 py-1 rounded-lg text-stone-400 hover:text-stone-200 text-xs transition-colors duration-200 cursor-pointer"
              aria-label="Code kopieren"
            >
              Kopieren
            </button>
          </div>

          <!-- Code content -->
          <pre class="text-stone-300"><code id="compose-code">{composeYaml}</code></pre>
        </div>

        <!-- Command below -->
        <div class="flex items-center gap-3 bg-stone-900 dark:bg-stone-800/50 mt-4 p-4 border border-stone-800 dark:border-stone-700/50 rounded-xl">
          <span class="font-mono font-bold text-sm text-accent-400">$</span>
          <code class="font-mono text-stone-300 text-sm">docker compose up -d</code>
        </div>
      </div>
    </div>
  </div>
</section>

<script is:inline>
  document.getElementById('copy-btn').addEventListener('click', function() {
    var code = document.getElementById('compose-code').textContent
    navigator.clipboard.writeText(code).then(function() {
      var btn = document.getElementById('copy-btn')
      btn.textContent = 'Kopiert âœ“'
      setTimeout(function() { btn.textContent = 'Kopieren' }, 2000)
    })
  })
</script>
